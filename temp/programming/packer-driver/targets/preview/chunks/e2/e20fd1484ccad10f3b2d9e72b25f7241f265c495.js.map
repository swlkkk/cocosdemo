{"version":3,"sources":["file:///Users/swl/Downloads/cocosPusher/assets/scripts/popcontrol.ts"],"names":["_decorator","Component","director","native","game","sys","settleTs","awardCl","coinCreate","chargList","ccclass","property","popcontrol","popNum","iosTouch","start","controlBalance","type","surplus","node","getChildByName","active","controlCharge","controlQuite","parent","getComponent","closeOut","controlTime","controlSettle","openTimeOut","clearData","isNative","os","OS","IOS","OSX","loadScene","end","clearAllNode","ANDROID","arr","JSON","parse","reflection","callStaticMethod","creation","bridge","sendToNative","controlRule","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, director, Label, Node, native, game, sys, assetManager } from 'cc';\nimport { settleTs } from './settleTs';\nimport { awardCl } from './awardCl';\nimport { coinCreate } from './coinCreate';\nimport { chargList } from './chargList';\nconst { ccclass, property } = _decorator;\n\n@ccclass('popcontrol')\nexport class popcontrol extends Component {\n    popNum = 0\n    iosTouch = 0\n    start() {\n    }\n\n    controlBalance(type: boolean, surplus?: string) {\n        if (surplus != null) {\n            if (surplus == 'false') {\n                this.popNum--;\n                this.node.getChildByName('balance_node').active = false\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n            } else {\n                this.popNum--;\n                this.node.getChildByName('balance_node').active = false\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n                this.controlCharge(true)\n            }\n        } else {\n            if (type) {\n                this.popNum++;\n                this.node.getChildByName('balance_node').active = true\n                this.node.active = true\n            } else {\n                this.popNum--;\n                this.node.getChildByName('balance_node').active = false\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n            }\n        }\n    }\n    controlQuite(type: boolean, surplus?: string) {\n        if (surplus != null) {\n            if (surplus == 'false') {\n                this.popNum--;\n                this.node.getChildByName('quite_node').active = false\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n            } else if (surplus == 'next') {\n                this.popNum--;\n                this.node.getChildByName('quite_node').active = false\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n                this.node.parent.parent.parent.getComponent(coinCreate).closeOut()\n            }\n        } else {\n            if (type) {\n                this.popNum++;\n                this.node.getChildByName('quite_node').active = true\n                this.node.active = true\n            } else {\n                this.popNum--;\n                this.node.getChildByName('quite_node').active = false\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n            }\n        }\n    }\n    controlTime(type: boolean, surplus?: string) {\n        if (surplus != null) {\n            if (surplus == 'false') {\n                this.popNum--;\n                this.node.getChildByName('time_node').active = false\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n                this.node.parent.parent.parent.getComponent(coinCreate).closeOut()\n            }\n        } else {\n            if (type) {\n                this.popNum++;\n                this.node.getChildByName('time_node').active = true\n                this.node.active = true\n            } else {\n                this.popNum--;\n                this.node.getChildByName('time_node').active = false\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n            }\n        }\n    }\n    controlSettle(type: boolean) {\n        if (type) {\n            this.popNum++;\n            this.node.getChildByName('settle_node').active = true\n            this.node.getChildByName('settle_node').getComponent(settleTs).openTimeOut()\n            this.node.active = true\n        } else {\n            this.popNum--;\n            this.node.getChildByName('settle_node').active = false\n            if (this.popNum == 0) {\n                this.node.active = false\n            }\n            this.node.getChildByName('settle_node').getChildByName('symbol_node').getChildByName('award_node').getComponent(awardCl).clearData()\n            if (sys.isNative && (sys.os == sys.OS.IOS || sys.os == sys.OS.OSX)) {\n                director.loadScene(\"scene-quality\");\n            } else {\n                game.end()\n            }\n        }\n    }\n    controlCharge(type: boolean, surplus?: string) {\n        if (surplus != null) {\n            if (surplus == 'false') {\n                this.popNum--;\n                this.node.getChildByName('charge_node').active = false\n                this.node.getChildByName('charge_node').getChildByName('ScrollView').getChildByName('view').getChildByName('content').getComponent(chargList).clearAllNode()\n                this.iosTouch = 0\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n            }\n        } else {\n            if (type) {\n                if (sys.os == sys.OS.ANDROID && sys.isNative) {\n                    this.popNum++;\n                    let arr = JSON.parse(native.reflection.callStaticMethod(\"com/lotogram/tbjdwc/mvvm/ui/activity/TuibiDevicesActivity\", \"getProducts\", \"()Ljava/lang/String;\"));\n                    this.node.getChildByName('charge_node').getChildByName('ScrollView').getChildByName('view').getChildByName('content').getComponent(chargList).creation(arr)\n                    this.node.getChildByName('charge_node').active = true\n                    this.node.active = true\n                } else if (sys.isNative && (sys.os == sys.OS.IOS || sys.os == sys.OS.OSX)) {\n                    if(this.iosTouch == 0) {\n                        this.iosTouch++;\n                        native.bridge.sendToNative('native_getProducts'); \n                    }\n                }\n            } else {\n                this.popNum--;\n                this.node.getChildByName('charge_node').active = false\n                this.node.getChildByName('charge_node').getChildByName('ScrollView').getChildByName('view').getChildByName('content').getComponent(chargList).clearAllNode()\n                this.iosTouch = 0\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n            }\n        }\n    }\n    controlRule(type: boolean, surplus?: string) {\n        if (surplus != null) {\n            if (surplus == 'false') {\n                this.popNum--;\n                this.node.getChildByName('rule_node').active = false\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n            }\n        } else {\n            if (type) {\n                this.popNum++;\n                this.node.getChildByName('rule_node').active = true\n                this.node.active = true\n            } else {\n                this.popNum--;\n                this.node.getChildByName('rule_node').active = false\n                if (this.popNum == 0) {\n                    this.node.active = false\n                }\n            }\n        }\n    }\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}