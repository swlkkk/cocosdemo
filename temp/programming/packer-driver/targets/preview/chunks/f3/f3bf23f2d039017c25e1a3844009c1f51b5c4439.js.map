{"version":3,"sources":["file:///Users/swl/Downloads/cocosPusher/assets/scripts/menu.ts"],"names":["_decorator","Component","Sprite","SpriteFrame","resources","native","sys","popcontrol","coinCreate","ccclass","property","menu","menuSpritePath","orientsymbol","popControl","pusher","start","forEach","spritePath","preload","node","parent","getChildByName","getComponent","soundStatus","load","err","spriteFrame","orientChange","active","toCharge","controlCharge","roomOut","isDroped","controlQuite","closeOut","conRule","controlRule","soundSwitch","soundApi","stop","playMusic","os","OS","ANDROID","isNative","reflection","callStaticMethod","IOS","OSX","bridge","sendToNative","toString","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Sprite, SpriteFrame, resources, director, game, native, sys } from 'cc';\nimport { popcontrol } from './popcontrol';\nimport { coinCreate } from './coinCreate';\nconst { ccclass, property } = _decorator;\n\n@ccclass('menu')\nexport class menu extends Component {\n    menuSpritePath = [\n        'btn_xntb_menu01/spriteFrame',\n        'btn_xntb_menu02/spriteFrame',\n        'btn_xntb_sound01/spriteFrame',\n        'btn_xntb_sound02/spriteFrame'\n    ]\n    orientsymbol = false\n    popControl = null\n    pusher = null\n    start() {\n        this.menuSpritePath.forEach((spritePath) => {\n            resources.preload(spritePath, SpriteFrame)\n        })\n        this.popControl = this.node.parent.getChildByName('pop_node').getComponent(popcontrol)\n        this.pusher = this.node.parent.parent.parent\n        if (this.pusher.getComponent(coinCreate).soundStatus) {\n            resources.load(this.menuSpritePath[2], SpriteFrame, (err, spritePath) => {\n                this.node.getChildByName('sound').getChildByName('sound_icon').getComponent(Sprite).spriteFrame = spritePath\n            })\n        } else {\n            resources.load(this.menuSpritePath[3], SpriteFrame, (err, spritePath) => {\n                this.node.getChildByName('sound').getChildByName('sound_icon').getComponent(Sprite).spriteFrame = spritePath\n            })\n        }\n    }\n    orientChange() {\n        if (!this.orientsymbol) {\n            this.orientsymbol = true\n            resources.load(this.menuSpritePath[1], SpriteFrame, (err, spritePath) => {\n                this.node.getChildByName('back_btn').getComponent(Sprite).spriteFrame = spritePath\n            })\n            this.node.getChildByName('menu_bg').active = false\n            this.node.getChildByName('charge').active = false\n            this.node.getChildByName('rule').active = false\n            this.node.getChildByName('sound').active = false\n            this.node.getChildByName('exit').active = false\n        } else {\n            this.orientsymbol = false\n            resources.load(this.menuSpritePath[0], SpriteFrame, (err, spritePath) => {\n                this.node.getChildByName('back_btn').getComponent(Sprite).spriteFrame = spritePath\n            })\n            this.node.getChildByName('menu_bg').active = true\n            this.node.getChildByName('charge').active = true\n            this.node.getChildByName('rule').active = true\n            this.node.getChildByName('sound').active = true\n            this.node.getChildByName('exit').active = true\n        }\n    }\n    // 充值\n    toCharge() {\n        this.popControl.controlCharge(true)\n    }\n    // 离开房间\n    roomOut() {\n        if (this.pusher.getComponent(coinCreate).isDroped) {\n            this.popControl.controlQuite(true)\n        } else {\n            this.pusher.getComponent(coinCreate).closeOut()\n        }\n    }\n    // 规则弹窗\n    conRule() {\n        this.popControl.controlRule(true)\n    }\n    // 声音控制\n    soundSwitch() {\n        if (this.pusher.getComponent(coinCreate).soundStatus) {\n            this.pusher.getComponent(coinCreate).soundStatus = false\n            resources.load(this.menuSpritePath[3], SpriteFrame, (err, spritePath) => {\n                this.node.getChildByName('sound').getChildByName('sound_icon').getComponent(Sprite).spriteFrame = spritePath\n            })\n            this.pusher.getComponent(coinCreate).soundApi.stop()\n        } else {\n            this.pusher.getComponent(coinCreate).soundStatus = true\n            resources.load(this.menuSpritePath[2], SpriteFrame, (err, spritePath) => {\n                this.node.getChildByName('sound').getChildByName('sound_icon').getComponent(Sprite).spriteFrame = spritePath\n            })\n            this.pusher.getComponent(coinCreate).playMusic('music/bgMusic')\n        }\n        if (sys.os == sys.OS.ANDROID && sys.isNative) {\n            native.reflection.callStaticMethod(\"com/lotogram/tbjdwc/mvvm/ui/activity/TuibiDevicesActivity\", \"setSound\", \"(Z)V\", this.pusher.getComponent(coinCreate).soundStatus);\n        } else if (sys.isNative && (sys.os == sys.OS.IOS || sys.os == sys.OS.OSX)) {\n            native.bridge.sendToNative('native_setSound',this.pusher.getComponent(coinCreate).soundStatus.toString());\n        }\n    }\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}