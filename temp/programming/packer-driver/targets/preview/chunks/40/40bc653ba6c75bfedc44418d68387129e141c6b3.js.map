{"version":3,"sources":["file:///Users/swl/Downloads/cocosPusher/assets/scripts/pushplate.ts"],"names":["_decorator","Component","tween","Vec3","RigidBody","Collider","ccclass","property","pushplate","moveOut","moveIn","start","rotationPlate","node","collider","getComponent","on","onCollision","event","coinBody","otherCollider","name","useCCD","clearState","add","position","inSide","to","easing","outSide","then","union","repeatForever","update","deltaTime"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;;;;;;;;;OACxD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;2BAGjBQ,S,WADZF,OAAO,CAAC,WAAD,C,gBAAR,MACaE,SADb,SAC+BP,SAD/B,CACyC;AAAA;AAAA;AAAA,eAC9BQ,OAD8B,GACd,IAAIN,IAAJ,CAAS,CAAT,EAAY,GAAZ,EAAiB,CAAjB,CADc;AAAA,eAE9BO,MAF8B,GAEf,IAAIP,IAAJ,CAAS,CAAT,EAAY,CAAC,GAAb,EAAkB,CAAlB,CAFe;AAAA;;AAGrCQ,QAAAA,KAAK,GAAG;AACJ,eAAKC,aAAL,CAAmB,KAAKC,IAAxB;AACA,cAAIC,QAAQ,GAAG,KAAKD,IAAL,CAAUE,YAAV,CAAuBV,QAAvB,CAAf,CAFI,CAGJ;;AACAS,UAAAA,QAAQ,CAACE,EAAT,CAAY,kBAAZ,EAAgC,KAAKC,WAArC,EAAkD,IAAlD;AACH;;AAEOA,QAAAA,WAAW,CAACC,KAAD,EAAyB;AACxC,cAAIC,QAAQ,GAAGD,KAAK,CAACE,aAAN,CAAoBP,IAApB,CAAyBE,YAAzB,CAAsCX,SAAtC,CAAf;;AACA,cAAIe,QAAQ,IAAI,IAAhB,EAAsB;AAClB,gBAAIA,QAAQ,CAACN,IAAT,CAAcQ,IAAd,IAAsB,SAA1B,EAAqC;AACjCF,cAAAA,QAAQ,CAACG,MAAT,GAAkB,KAAlB;AACAH,cAAAA,QAAQ,CAACI,UAAT;AACH;AACJ;AACJ;;AAEDX,QAAAA,aAAa,CAACC,IAAD,EAAa;AACtBV,UAAAA,IAAI,CAACqB,GAAL,CAAS,KAAKd,MAAd,EAAsB,KAAKA,MAA3B,EAAmC,KAAKG,IAAL,CAAUY,QAA7C;AACAtB,UAAAA,IAAI,CAACqB,GAAL,CAAS,KAAKf,OAAd,EAAuB,KAAKA,OAA5B,EAAqC,KAAKC,MAA1C;AACA,cAAIgB,MAAM,GAAGxB,KAAK,GAAGyB,EAAR,CAAW,GAAX,EAAgB;AAAEF,YAAAA,QAAQ,EAAE,KAAKf;AAAjB,WAAhB,EAA2C;AAAEkB,YAAAA,MAAM,EAAE;AAAV,WAA3C,CAAb;AACA,cAAIC,OAAO,GAAG3B,KAAK,GAAGyB,EAAR,CAAW,GAAX,EAAgB;AAAEF,YAAAA,QAAQ,EAAE,KAAKhB;AAAjB,WAAhB,EAA4C;AAAEmB,YAAAA,MAAM,EAAE;AAAV,WAA5C,CAAd;AACA1B,UAAAA,KAAK,CAACW,IAAD,CAAL,CAAYiB,IAAZ,CAAiBJ,MAAjB,EAAyBI,IAAzB,CAA8BD,OAA9B,EAAuCE,KAAvC,GAA+CC,aAA/C,GAA+DrB,KAA/D;AACH;;AAEDsB,QAAAA,MAAM,CAACC,SAAD,EAAoB,CACzB;;AA7BoC,O","sourcesContent":["import { _decorator, Component, Node, tween, Vec3, RigidBody, Collider, ICollisionEvent, assetManager} from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('pushplate')\nexport class pushplate extends Component {\n    public moveOut: Vec3 = new Vec3(0, 7.5, 0)\n    public moveIn: Vec3 = new Vec3(0, -7.5, 0)\n    start() {\n        this.rotationPlate(this.node)\n        let collider = this.node.getComponent(Collider);\n        // 监听触发事件\n        collider.on('onCollisionEnter', this.onCollision, this);\n    }\n\n    private onCollision(event: ICollisionEvent) {\n        var coinBody = event.otherCollider.node.getComponent(RigidBody);\n        if (coinBody != null) {\n            if (coinBody.node.name == 'coinnew') {\n                coinBody.useCCD = false\n                coinBody.clearState()\n            }\n        }\n    }\n\n    rotationPlate(node: Node) {\n        Vec3.add(this.moveIn, this.moveIn, this.node.position)\n        Vec3.add(this.moveOut, this.moveOut, this.moveIn)\n        let inSide = tween().to(1.3, { position: this.moveIn }, { easing: 'linear' })\n        let outSide = tween().to(1.3, { position: this.moveOut }, { easing: 'linear' })\n        tween(node).then(inSide).then(outSide).union().repeatForever().start()\n    }\n\n    update(deltaTime: number) {\n    }\n}"]}