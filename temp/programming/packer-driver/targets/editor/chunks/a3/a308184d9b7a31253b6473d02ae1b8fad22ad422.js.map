{"version":3,"sources":["file:///Users/swl/Desktop/cocos/cocos_android1/assets/scripts/awardSensing.ts"],"names":["_decorator","Component","BoxCollider","gameCore","flashPicts","labelts","coinCreate","ccclass","property","awardSensing","channel","start","collider","node","getComponent","on","onTriggerEnter","event","parent","starting1","starting2","flashPic","getChildByName","flashLabel","cjTs","activeClosed","selfCollider","name","winning","indexOf","channelCount","sendData","websocketFnc","ws_channelpass","websocket","websocket_sendMessage","ws","wsuuid","wssalt","doFlash","dolabel","playMusic","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, BoxCollider, ITriggerEvent } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { gameCore } from './gameCore';\nimport { outSprite } from './outSprite';\nimport { flashPicts } from './flashPicts';\nimport { labelts } from './labelts';\nimport { coinCreate } from './coinCreate';\n\n@ccclass('awardSensing')\nexport class awardSensing extends Component {\n    // 亮起图标\n    public channel: Array<number> = null\n\n    start() {\n        // 监听触发事件\n        let collider = this.node.getComponent(BoxCollider);\n        collider.on('onTriggerExit', this.onTriggerEnter, this);\n    }\n    onTriggerEnter(event: ITriggerEvent) {\n        this.channel = [this.node.parent.getComponent(gameCore).starting1, this.node.parent.getComponent(gameCore).starting2]\n        // 闪屏图片\n        let flashPic = this.node.parent.getChildByName('Main').getChildByName('Canvas').getChildByName('flashNode').getComponent(flashPicts)\n        // 闪屏数字\n        let flashLabel = this.node.parent.getChildByName('Main').getChildByName('Canvas').getChildByName('labels').getComponent(labelts)\n        // 拿到coinCreate主节点\n        let cjTs = this.node.parent.getComponent(coinCreate)\n        if (cjTs.activeClosed) {\n            return\n        }\n        if (event.selfCollider.node.name == 'IncentiveCube1') {\n            if (!cjTs.winning) {\n                if (this.channel.indexOf(0) != -1) {\n                    cjTs.channelCount = 0\n                    let sendData = cjTs.websocketFnc.ws_channelpass(\n                        0,\n                    )\n                    cjTs.websocket.websocket_sendMessage(sendData, cjTs.ws, cjTs.wsuuid, cjTs.wssalt)\n                    flashPic.doFlash(0)\n                    flashLabel.dolabel(0)\n                    cjTs.playMusic('music/awardMs')\n                }\n            }\n        } else if (event.selfCollider.node.name == 'IncentiveCube2') {\n            if (!cjTs.winning) {\n                if (this.channel.indexOf(1) != -1) {\n                    cjTs.channelCount = 1\n                    let sendData = cjTs.websocketFnc.ws_channelpass(\n                        1,\n                    )\n                    cjTs.websocket.websocket_sendMessage(sendData, cjTs.ws, cjTs.wsuuid, cjTs.wssalt)\n                    flashPic.doFlash(1)\n                    flashLabel.dolabel(1)\n                    cjTs.playMusic('music/awardMs')\n                }\n            }\n        } else if (event.selfCollider.node.name == 'IncentiveCube3') {\n            if (!cjTs.winning) {\n                if (this.channel.indexOf(2) != -1) {\n                    cjTs.channelCount = 2\n                    let sendData = cjTs.websocketFnc.ws_channelpass(\n                        2,\n                    )\n                    cjTs.websocket.websocket_sendMessage(sendData, cjTs.ws, cjTs.wsuuid, cjTs.wssalt)\n                    flashPic.doFlash(2)\n                    flashLabel.dolabel(2)\n                    cjTs.playMusic('music/awardMs')\n                }\n            }\n        } else if (event.selfCollider.node.name == 'IncentiveCube4') {\n            if (!cjTs.winning) {\n                if (this.channel.indexOf(3) != -1) {\n                    cjTs.channelCount = 3\n                    let sendData = cjTs.websocketFnc.ws_channelpass(\n                        3,\n                    )\n                    cjTs.websocket.websocket_sendMessage(sendData, cjTs.ws, cjTs.wsuuid, cjTs.wssalt)\n                    flashPic.doFlash(3)\n                    flashLabel.dolabel(3)\n                    cjTs.playMusic('music/awardMs')\n                }\n            }\n        } else if (event.selfCollider.node.name == 'IncentiveCube5') {\n            if (!cjTs.winning) {\n                if (this.channel.indexOf(4) != -1) {\n                    cjTs.channelCount = 4\n                    let sendData = cjTs.websocketFnc.ws_channelpass(\n                        4,\n                    )\n                    cjTs.websocket.websocket_sendMessage(sendData, cjTs.ws, cjTs.wsuuid, cjTs.wssalt)\n                    flashPic.doFlash(4)\n                    flashLabel.dolabel(4)\n                    cjTs.playMusic('music/awardMs')\n                }\n            }\n        } else if (event.selfCollider.node.name == 'IncentiveCube6') {\n            if (!cjTs.winning) {\n                if (this.channel.indexOf(5) != -1) {\n                    cjTs.channelCount = 5\n                    let sendData = cjTs.websocketFnc.ws_channelpass(\n                        5,\n                    )\n                    cjTs.websocket.websocket_sendMessage(sendData, cjTs.ws, cjTs.wsuuid, cjTs.wssalt)\n                    flashPic.doFlash(5)\n                    flashLabel.dolabel(5)\n                    cjTs.playMusic('music/awardMs')\n                }\n            }\n        } else if (event.selfCollider.node.name == 'IncentiveCube7') {\n            if (!cjTs.winning) {\n                if (this.channel.indexOf(6) != -1) {\n                    cjTs.channelCount = 6\n                    let sendData = cjTs.websocketFnc.ws_channelpass(\n                        6,\n                    )\n                    cjTs.websocket.websocket_sendMessage(sendData, cjTs.ws, cjTs.wsuuid, cjTs.wssalt)\n                    flashPic.doFlash(6)\n                    flashLabel.dolabel(6)\n                    cjTs.playMusic('music/awardMs')\n                }\n            }\n        } else if (event.selfCollider.node.name == 'IncentiveCube8') {\n            if (!cjTs.winning) {\n                if (this.channel.indexOf(7) != -1) {\n                    cjTs.channelCount = 7\n                    let sendData = cjTs.websocketFnc.ws_channelpass(\n                        7,\n                    )\n                    cjTs.websocket.websocket_sendMessage(sendData, cjTs.ws, cjTs.wsuuid, cjTs.wssalt)\n                    flashPic.doFlash(7)\n                    flashLabel.dolabel(7)\n                    cjTs.playMusic('music/awardMs')\n                }\n            }\n        }\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}