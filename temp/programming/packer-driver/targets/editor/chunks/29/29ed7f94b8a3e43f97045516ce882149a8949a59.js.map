{"version":3,"sources":["file:///Users/swl/Desktop/cocos/cocos_android/extensions/i18n/assets/LocalizedLabel.ts"],"names":["_decorator","Component","i18n","ccclass","property","executeInEditMode","LocalizedLabel","visible","displayName","label","_key","key","str","updateLabel","onLoad","ready","init","fetchRender","getComponent","string","t"],"mappings":";;;;;;;;;;;;;;;;AAGSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AAFTC,MAAAA,I;;;;;;;;;OAGN;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA2CL,U;;gCAIpCM,c,WAFZH,OAAO,CAAC,gBAAD,C,UAKHC,QAAQ,CAAC;AAAEG,QAAAA,OAAO,EAAE;AAAX,OAAD,C,UAGRH,QAAQ,CAAC;AAAEI,QAAAA,WAAW,EAAE,KAAf;AAAsBD,QAAAA,OAAO,EAAE;AAA/B,OAAD,C,gBAPZF,iB,qBADD,MAEaC,cAFb,SAEoCL,SAFpC,CAE8C;AAAA;AAAA;AAAA,eAC1CQ,KAD0C,GACpB,IADoB;;AAAA;AAAA;;AAOlC,YAAJC,IAAI,GAAG;AACP,iBAAO,KAAKC,GAAZ;AACH;;AACO,YAAJD,IAAI,CAACE,GAAD,EAAc;AAClB,eAAKC,WAAL;AACA,eAAKF,GAAL,GAAWC,GAAX;AACH;;AAEDE,QAAAA,MAAM,GAAG;AACL,cAAI,CAACZ,IAAI,CAACa,KAAV,EAAiB;AACbb,YAAAA,IAAI,CAACc,IAAL,CAAU,IAAV;AACH;;AACD,eAAKC,WAAL;AACH;;AAEDA,QAAAA,WAAW,GAAI;AACX,cAAIR,KAAK,GAAG,KAAKS,YAAL,CAAkB,UAAlB,CAAZ;;AACA,cAAIT,KAAJ,EAAW;AACP,iBAAKA,KAAL,GAAaA,KAAb;AACA,iBAAKI,WAAL;AACA;AACH;AACJ;;AAEDA,QAAAA,WAAW,GAAI;AACX,eAAKJ,KAAL,KAAe,KAAKA,KAAL,CAAWU,MAAX,GAAoBjB,IAAI,CAACkB,CAAL,CAAO,KAAKT,GAAZ,CAAnC;AACH;;AAjCyC,O;;;;;iBAI5B,E","sourcesContent":["\nimport * as i18n from './LanguageData';\n\nimport { _decorator, Component, Label } from 'cc';\nconst { ccclass, property, executeInEditMode } = _decorator;\n\n@ccclass('LocalizedLabel')\n@executeInEditMode\nexport class LocalizedLabel extends Component {\n    label: Label | null = null;\n\n    @property({ visible: false })\n    key: string = '';\n\n    @property({ displayName: 'Key', visible: true })\n    get _key() {\n        return this.key;\n    }\n    set _key(str: string) {\n        this.updateLabel();\n        this.key = str;\n    }\n\n    onLoad() {\n        if (!i18n.ready) {\n            i18n.init('tc');\n        }\n        this.fetchRender();\n    }\n\n    fetchRender () {\n        let label = this.getComponent('cc.Label') as Label;\n        if (label) {\n            this.label = label;\n            this.updateLabel();\n            return;\n        } \n    }\n\n    updateLabel () {\n        this.label && (this.label.string = i18n.t(this.key));\n    }\n}\n"]}