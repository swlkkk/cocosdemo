{"version":3,"sources":["file:///Users/swl/Downloads/cocosPusher/extensions/localization-editor/static/assets/components/l10n-label.ts"],"names":["_decorator","CCInteger","EDITOR","l10n","L10nComponent","ccclass","property","executeInEditMode","menu","L10nLabel","visible","type","key","value","_key","render","count","_count","onLoad","translatedString","t","label","preview","string"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AAEZC,MAAAA,M,UAAAA,M;;AACFC,MAAAA,I;;AACAC,MAAAA,a;;;;;AAHP;;;OAKM;AACFC,QAAAA,OADE;AAEFC,QAAAA,QAFE;AAGFC,QAAAA,iBAHE;AAIFC,QAAAA;AAJE,O,GAKFR,U;;yBAKiBS,S,WAHpBJ,OAAO,CAAC,WAAD,C,UACPE,iBAAiB,CAAC,IAAD,C,UACjBC,IAAI,CAAC,8BAAD,C,UAEAF,QAAQ,CAAC;AAAEI,QAAAA,OAAO,EAAE;AAAX,OAAD,C,UAGRJ,QAAQ,CAAC;AAAEI,QAAAA,OAAO,EAAE;AAAX,OAAD,C,UASRJ,QAAQ,CAAC;AAAEI,QAAAA,OAAO,EAAE;AAAX,OAAD,C,UAERJ,QAAQ,CAAC;AACNK,QAAAA,IAAI,EAAEV,SADA;AAENS,QAAAA,OAAO,EAAE;AAFH,OAAD,C,yDAlBb,MAGqBD,SAHrB,SAGuCL,aAHvC,CAGqD;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAK1C,YAAHQ,GAAG,CAACC,KAAD,EAAgB;AACnB,eAAKC,IAAL,GAAYD,KAAZ;AACA,eAAKE,MAAL;AACH;;AAEM,YAAHH,GAAG,GAAW;AACd,iBAAO,KAAKE,IAAZ;AACH;;AAOQ,YAALE,KAAK,CAACH,KAAD,EAAgB;AACrB,eAAKI,MAAL,GAAcJ,KAAd;AACA,eAAKE,MAAL;AACH;;AAEQ,YAALC,KAAK,GAAW;AAChB,iBAAO,KAAKC,MAAZ;AACH;;AAEDC,QAAAA,MAAM,GAAG;AACL,cAAI,OAAO,MAAMA,MAAb,KAAwB,UAA5B,EAAwC;AACpC,kBAAMA,MAAN;AACH;AACJ;;AAEDH,QAAAA,MAAM,GAAG;AACL,gBAAMI,gBAAgB,GAAGhB,IAAI,CAACiB,CAAL,CAAO,KAAKN,IAAZ,EAAkB;AAAEE,YAAAA,KAAK,EAAE,KAAKC;AAAd,WAAlB,CAAzB;;AACA,cAAI,OAAO,KAAKI,KAAZ,KAAsB,WAAtB,IAAqC,OAAOF,gBAAP,KAA4B,WAArE,EAAkF;AAC9E;AACH;;AACD,cAAIjB,MAAJ,EAAY;AACR,iBAAKoB,OAAL,CAAaH,gBAAb;AACH,WAFD,MAEO;AACH,iBAAKE,KAAL,CAAYE,MAAZ,GAAqBJ,gBAArB;AACH;AACJ;;AA5CgD,O;;;;;iBAEtC,E;;;;;;;iBAYE,C","sourcesContent":["import { _decorator, CCInteger, Label } from 'cc';\r\n// @ts-ignore\r\nimport { EDITOR } from 'cc/env';\r\nimport l10n from '../core/l10n-manager';\r\nimport L10nComponent from './l10n-component';\r\n\r\nconst {\r\n    ccclass,\r\n    property,\r\n    executeInEditMode,\r\n    menu,\r\n} = _decorator;\r\n\r\n@ccclass('L10nLabel')\r\n@executeInEditMode(true)\r\n@menu('LocalizationEditor/L10nLabel')\r\nexport default class L10nLabel extends L10nComponent {\r\n    @property({ visible: false })\r\n        _key = '';\r\n\r\n    @property({ visible: true })\r\n    set key(value: string) {\r\n        this._key = value;\r\n        this.render();\r\n    }\r\n\r\n    get key(): string {\r\n        return this._key;\r\n    }\r\n    @property({ visible: false })\r\n        _count = 0;\r\n    @property({\r\n        type: CCInteger,\r\n        visible: true,\r\n    })\r\n    set count(value: number) {\r\n        this._count = value;\r\n        this.render();\r\n    }\r\n\r\n    get count(): number {\r\n        return this._count;\r\n    }\r\n\r\n    onLoad() {\r\n        if (typeof super.onLoad === 'function') {\r\n            super.onLoad();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const translatedString = l10n.t(this._key, { count: this._count });\r\n        if (typeof this.label === 'undefined' || typeof translatedString === 'undefined') {\r\n            return;\r\n        }\r\n        if (EDITOR) {\r\n            this.preview(translatedString);\r\n        } else {\r\n            this.label!.string = translatedString;\r\n        }\r\n    }\r\n}\r\n"]}