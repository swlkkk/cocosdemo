{"version":3,"sources":["file:///Users/swl/Downloads/cocosPusher/extensions/localization-editor/static/assets/components/l10n-component.ts"],"names":["_decorator","Component","Label","EDITOR","ccclass","property","disallowMultiple","requireComponent","menu","L10nComponent","readonly","constructor","label","undefined","string","onLoad","node","getComponent","start","render","preview","value","originalString","_string","updateRenderData","cce","Engine","repaintInEditMode"],"mappings":";;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;;AAEvBC,MAAAA,M,UAAAA,M;;;;;AADT;;;OAGM;AACFC,QAAAA,OADE;AAEFC,QAAAA,QAFE;AAGFC,QAAAA,gBAHE;AAIFC,QAAAA,gBAJE;AAKFC,QAAAA;AALE,O,GAMFR,U;;yBAM0BS,a,WAJ7BL,OAAO,CAAC,eAAD,C,UACPG,gBAAgB,CAACL,KAAD,C,UAChBI,gBAAgB,E,UAChBE,IAAI,CAAC,yCAAD,C,UAMAH,QAAQ,CAAC;AAAEK,QAAAA,QAAQ,EAAE;AAAZ,OAAD,C,wEATb,MAI8BD,aAJ9B,SAIoDR,SAJpD,CAI8D;AAChDU,QAAAA,WAAW,GAAG;AACpB;AADoB,eAQxBC,KARwB,GAQDC,SARC;AAEvB;;AAGS,YAANC,MAAM,GAAG;AAAA;;AACT,iBAAO,qBAAKF,KAAL,iCAAYE,MAAZ,KAAsB,EAA7B;AACH;;AAGSC,QAAAA,MAAM,GAAG;AACf,eAAKH,KAAL,GAAa,KAAKI,IAAL,CAAUC,YAAV,CAAuBf,KAAvB,CAAb;AACH;;AAESgB,QAAAA,KAAK,GAAG;AACd,eAAKC,MAAL;AACH;;AAEMA,QAAAA,MAAM,GAAG,CAAE;;AAEXC,QAAAA,OAAO,CAACC,KAAD,EAAgB;AAC1B,cAAI,KAAKT,KAAL,IAAcT,MAAlB,EAA0B;AACtB,kBAAMmB,cAAc,GAAG,KAAKV,KAAL,CAAWE,MAAlC,CADsB,CAEtB;AACA;;AACA,iBAAKF,KAAL,CAAWW,OAAX,GAAqBF,KAArB;AACA,iBAAKT,KAAL,CAAWY,gBAAX,CAA4B,IAA5B,EALsB,CAMtB;AACA;;AACAC,YAAAA,GAAG,CAACC,MAAJ,CAAWC,iBAAX,GARsB,CAStB;AACA;;AACA,iBAAKf,KAAL,CAAWW,OAAX,GAAqBD,cAArB;AACH;AACJ;;AAnCyD,O","sourcesContent":["import { _decorator, Component, Label, Node } from 'cc';\r\n// @ts-ignore\r\nimport { EDITOR } from 'cc/env';\r\n\r\nconst {\r\n    ccclass,\r\n    property,\r\n    disallowMultiple,\r\n    requireComponent,\r\n    menu,\r\n} = _decorator;\r\n\r\n@ccclass('L10nComponent')\r\n@requireComponent(Label)\r\n@disallowMultiple()\r\n@menu('hidden:LocalizationEditor/L10nComponent')\r\nexport default abstract class L10nComponent extends Component {\r\n    protected constructor() {\r\n        super();\r\n    }\r\n\r\n    @property({ readonly: true })\r\n    get string() {\r\n        return this.label?.string || '';\r\n    }\r\n    label?: Label | null = undefined;\r\n\r\n    protected onLoad() {\r\n        this.label = this.node.getComponent(Label);\r\n    }\r\n\r\n    protected start() {\r\n        this.render();\r\n    }\r\n\r\n    public render() {}\r\n\r\n    public preview(value: string) {\r\n        if (this.label && EDITOR) {\r\n            const originalString = this.label.string;\r\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n            // @ts-ignore\r\n            this.label._string = value;\r\n            this.label.updateRenderData(true);\r\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n            // @ts-ignore\r\n            cce.Engine.repaintInEditMode();\r\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n            // @ts-ignore\r\n            this.label._string = originalString;\r\n        }\r\n    }\r\n}\r\n"]}