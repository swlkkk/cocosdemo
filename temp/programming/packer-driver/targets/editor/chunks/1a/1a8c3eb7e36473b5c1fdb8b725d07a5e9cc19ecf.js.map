{"version":3,"sources":["file:///Users/swl/Desktop/cocos/cocos_android/assets/scripts/scoreAn.ts"],"names":["_decorator","Component","Vec3","tween","Label","ccclass","property","scoreAn","targetPos","jumpStep","scoreAc","scoreCount","start","price","node","active","add","position","outSide","to","easing","then","call","setPosition","getChildByName","getComponent","string","update","deltaTime"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;;;;;;;;;OAC7C;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;yBAGjBO,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb,SAC6BN,SAD7B,CACuC;AAAA;AAAA;AAAA,eAC5BO,SAD4B,GACV,IAAIN,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,CADU;AAAA,eAE5BO,QAF4B,GAET,EAFS;AAAA,eAGnCC,OAHmC,GAGzB,IAHyB;AAAA,eAInCC,UAJmC,GAItB,CAJsB;AAAA;;AAKnCC,QAAAA,KAAK,GAAG,CACP;;AAEDL,QAAAA,OAAO,CAACM,KAAD,EAAgB;AACnB,cAAI,KAAKH,OAAL,IAAgB,IAApB,EAA0B;AACtB,iBAAKI,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACAb,YAAAA,IAAI,CAACc,GAAL,CAAS,KAAKR,SAAd,EAAyB,KAAKM,IAAL,CAAUG,QAAnC,EAA6C,IAAIf,IAAJ,CAAS,CAAT,EAAY,KAAKO,QAAjB,EAA2B,CAA3B,CAA7C;AACA,gBAAIS,OAAO,GAAGf,KAAK,GAAGgB,EAAR,CAAW,IAAX,EAAiB;AAAEF,cAAAA,QAAQ,EAAE,KAAKT;AAAjB,aAAjB,EAA+C;AAAEY,cAAAA,MAAM,EAAE;AAAV,aAA/C,CAAd;AACA,iBAAKV,OAAL,GAAeP,KAAK,CAAC,KAAKW,IAAN,CAAL,CAAiBO,IAAjB,CAAsBH,OAAtB,EAA+BI,IAA/B,CAAoC,MAAM;AACrD,mBAAKZ,OAAL,GAAe,IAAf;AACA,mBAAKI,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACA,mBAAKD,IAAL,CAAUS,WAAV,CAAsB,CAAtB,EAAyB,CAAC,OAA1B,EAAmC,CAAnC;AACA,mBAAKf,SAAL,GAAiB,IAAIN,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,CAAjB;;AACA,kBAAI,KAAKS,UAAL,GAAkB,CAAtB,EAAyB;AACrB,qBAAKG,IAAL,CAAUU,cAAV,CAAyB,OAAzB,EAAkCC,YAAlC,CAA+CrB,KAA/C,EAAsDsB,MAAtD,GAA+D,MAAM,KAAKf,UAAL,GAAkBE,KAAvF;AACA,qBAAKF,UAAL,GAAkB,CAAlB;AACA,qBAAKJ,OAAL,CAAaM,KAAb;AACH,eAJD,MAIO;AACH,qBAAKC,IAAL,CAAUU,cAAV,CAAyB,OAAzB,EAAkCC,YAAlC,CAA+CrB,KAA/C,EAAsDsB,MAAtD,GAA+D,MAAM,IAAIb,KAAzE;AACA,qBAAKF,UAAL,GAAkB,CAAlB;AACH;AACJ,aAbc,EAaZC,KAbY,EAAf;AAcH,WAlBD,MAkBO;AACH,iBAAKD,UAAL;AACH;AACJ;;AAGDgB,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAnCkC,O","sourcesContent":["import { _decorator, Component, Node, Vec3, tween, Label } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('scoreAn')\nexport class scoreAn extends Component {\n    public targetPos: Vec3 = new Vec3(0, 0, 0)\n    public jumpStep: number = 50\n    scoreAc = null\n    scoreCount = 0\n    start() {\n    }\n\n    scoreAn(price: number) {\n        if (this.scoreAc == null) {\n            this.node.active = true\n            Vec3.add(this.targetPos, this.node.position, new Vec3(0, this.jumpStep, 0))\n            let outSide = tween().to(0.25, { position: this.targetPos }, { easing: 'linear' })\n            this.scoreAc = tween(this.node).then(outSide).call(() => {\n                this.scoreAc = null\n                this.node.active = false\n                this.node.setPosition(0, -403.081, 0)\n                this.targetPos = new Vec3(0, 0, 0)\n                if (this.scoreCount > 0) {\n                    this.node.getChildByName('Label').getComponent(Label).string = '+' + this.scoreCount * price\n                    this.scoreCount = 0\n                    this.scoreAn(price)\n                } else {\n                    this.node.getChildByName('Label').getComponent(Label).string = '+' + 1 * price\n                    this.scoreCount = 0\n                }\n            }).start()\n        } else {\n            this.scoreCount++;\n        }\n    }\n\n\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}