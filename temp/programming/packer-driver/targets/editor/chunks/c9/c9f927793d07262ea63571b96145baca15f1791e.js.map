{"version":3,"sources":["file:///Users/swl/Desktop/cocos/cocos_android/extensions/i18n/assets/LocalizedSprite.ts"],"names":["_decorator","Component","SpriteFrame","i18n","ccclass","property","executeInEditMode","LocalizedSpriteItem","type","LocalizedSprite","sprite","onLoad","ready","init","fetchRender","getComponent","updateSprite","i","spriteList","length","item","language","_language","spriteFrame"],"mappings":";;;;;;;;;;;;;;;;AAGSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;;AAFpBC,MAAAA,I;;;;;;;;;OAGN;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA2CN,U;AAG3CO,MAAAA,mB,WADLH,OAAO,CAAC,qBAAD,C,UAIHC,QAAQ,CAAC;AACNG,QAAAA,IAAI,EAAEN;AADA,OAAD,C,2BAJb,MACMK,mBADN,CAC0B;AAAA;AAAA;;AAAA;AAAA;;AAAA,O,2EACrBF,Q;;;;;iBACkB,I;;;;;;;iBAIe,I;;;;iCAKzBI,e,YAFZL,OAAO,CAAC,iBAAD,C,UAKHC,QAAQ,CAAC;AACNG,QAAAA,IAAI,EAAED;AADA,OAAD,C,kBAJZD,iB,sBADD,MAEaG,eAFb,SAEqCR,SAFrC,CAE+C;AAAA;AAAA;AAAA,eAC3CS,MAD2C,GACnB,IADmB;;AAAA;AAAA;;AAQ3CC,QAAAA,MAAM,GAAG;AACL,cAAI,CAACR,IAAI,CAACS,KAAV,EAAiB;AACbT,YAAAA,IAAI,CAACU,IAAL,CAAU,IAAV;AACH;;AACD,eAAKC,WAAL;AACH;;AAEDA,QAAAA,WAAW,GAAI;AACX,cAAIJ,MAAM,GAAG,KAAKK,YAAL,CAAkB,WAAlB,CAAb;;AACA,cAAIL,MAAJ,EAAY;AACR,iBAAKA,MAAL,GAAcA,MAAd;AACA,iBAAKM,YAAL;AACA;AACH;AACJ;;AAEDA,QAAAA,YAAY,GAAI;AACZ,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,UAAL,CAAgBC,MAApC,EAA4CF,CAAC,EAA7C,EAAiD;AAC7C,kBAAMG,IAAI,GAAG,KAAKF,UAAL,CAAgBD,CAAhB,CAAb,CAD6C,CAE7C;;AACA,gBAAIG,IAAI,CAACC,QAAL,KAAkBlB,IAAI,CAACmB,SAA3B,EAAsC;AAClC;AACA,kBAAI,KAAKP,YAAL,CAAkB,WAAlB,CAAJ,EAA8C;AAC1C,qBAAKL,MAAL,GAAc,KAAKK,YAAL,CAAkB,WAAlB,CAAd;AACA,qBAAKL,MAAL,CAAYa,WAAZ,GAA0BH,IAAI,CAACG,WAA/B;AACA;AACH;AACJ;AACJ;AACJ;;AArC0C,O;;;;;iBAM9B,E","sourcesContent":["\nimport * as i18n from './LanguageData';\n\nimport { _decorator, Component, SpriteFrame, Sprite } from 'cc';\nconst { ccclass, property, executeInEditMode } = _decorator;\n\n@ccclass('LocalizedSpriteItem')\nclass LocalizedSpriteItem {\n    @property\n    language: string = 'tc';\n    @property({\n        type: SpriteFrame,\n    })\n    spriteFrame: SpriteFrame | null = null;\n}\n\n@ccclass('LocalizedSprite')\n@executeInEditMode\nexport class LocalizedSprite extends Component {\n    sprite: Sprite | null = null;\n\n    @property({\n        type: LocalizedSpriteItem,\n    })\n    spriteList = [];\n\n    onLoad() {\n        if (!i18n.ready) {\n            i18n.init('tc');\n        }\n        this.fetchRender();\n    }\n\n    fetchRender () {\n        let sprite = this.getComponent('cc.Sprite') as Sprite;\n        if (sprite) {\n            this.sprite = sprite;\n            this.updateSprite();\n            return;\n        } \n    }\n\n    updateSprite () {\n        for (let i = 0; i < this.spriteList.length; i++) {\n            const item = this.spriteList[i];\n            // @ts-ignore\n            if (item.language === i18n._language) {\n                // @ts-ignore\n                if (this.getComponent('cc.Sprite') as Sprite) {\n                    this.sprite = this.getComponent('cc.Sprite') as Sprite\n                    this.sprite.spriteFrame = item.spriteFrame;\n                    break;\n                }\n            }\n        }\n    }\n}\n"]}